{"ast":null,"code":"import _toConsumableArray from\"/Users/tanjapolz/Documents/Uni/3/devops/lecture-devops-app/app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/tanjapolz/Documents/Uni/3/devops/lecture-devops-app/app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/tanjapolz/Documents/Uni/3/devops/lecture-devops-app/app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/tanjapolz/Documents/Uni/3/devops/lecture-devops-app/app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/tanjapolz/Documents/Uni/3/devops/lecture-devops-app/app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component,Fragment}from'react';import AddTodo from'./components/AddTodo/AddTodo';import ListTodo from'./components/ListTodo/ListTodo';import PageLoader from'./components/PageLoader/PageLoader';import Header from'./components/Header/Header';import Login from'./components/Login/Login';import{init}from'./utils/APICalls';import Signup from'./components/Signup/Signup';import'./App.css';import{updateTodo,deleteTodo,signout}from'./utils/APICalls';import{fillTodoRows}from'./utils/Helper';var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={init:true,loggedInUser:'',token:'',todos:[],signup:false};_this.addTodo=function(newTodo){_this.setState(function(ps){return{todos:[].concat(_toConsumableArray(ps.todos),[newTodo])};});};_this.initiateTodo=function(todos){_this.setState({todos:todos});};_this.fillTodoRows=function(){return fillTodoRows(_this.state.todos,_this.handleImportant,_this.handleDone,_this.handleDelete);};_this.toggleSignup=function(){_this.setState(function(ps){return{signup:!ps.signup};});};_this.handleImportant=function(index,id){updateTodo(id,!_this.state.todos[index].important).then(function(todo){_this.setState(function(ps){var newState=ps;newState.todos[index].important=!newState.todos[index].important;return newState;});}).catch(function(error){_this.setState({errMessage:error});});};_this.handleDone=function(index,id){updateTodo(id,null,!_this.state.todos[index].done).then(function(todo){_this.setState(function(ps){var newState=ps;newState.todos[index].done=!newState.todos[index].done;return newState;});}).catch(function(error){_this.setState({errMessage:error});});};_this.logout=function(){_this.setState({loggedInUser:\"\",token:\"\"});};_this.handleLogin=function(user){_this.setState({loggedInUser:user,signup:false,init:false});};_this.backToLogin=function(){_this.setState({signup:false});};_this.handleDelete=function(index,id){deleteTodo(id).then(function(todo){_this.setState(function(ps){return{todos:[].concat(_toConsumableArray(ps.todos.splice(0,index)),_toConsumableArray(ps.todos.splice(1,ps.todos.length)))};});}).catch(function(error){_this.setState({errMessage:error});});};_this.handleSignout=function(){signout().then(function(user){_this.setState({loggedInUser:'',token:'',todos:[],signup:false});}).catch(function(error){_this.setState({errMessage:error});});};return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;init().then(function(user){_this2.handleLogin(user);}).catch(function(error){_this2.setState({init:false});});}},{key:\"render\",value:function render(){var userName=this.state.loggedInUser?this.state.loggedInUser.user.name:\"\";return/*#__PURE__*/React.createElement(\"div\",{className:\"app-main\"},/*#__PURE__*/React.createElement(Header,null),this.state.init?/*#__PURE__*/React.createElement(PageLoader,null):this.state.signup?/*#__PURE__*/React.createElement(Signup,{backToLogin:this.backToLogin,signupDone:this.toggleSignup}):!this.state.loggedInUser?/*#__PURE__*/React.createElement(Login,{login:this.handleLogin,signup:this.toggleSignup}):/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(AddTodo,{userName:userName,addTodo:this.addTodo,signout:this.handleSignout}),/*#__PURE__*/React.createElement(ListTodo,{initiateTodo:this.initiateTodo,todos:this.state.todos,fillTodoRows:this.fillTodoRows,handleImportant:this.handleImportant,handleDone:this.handleDone,deleteTodo:this.handleDelete})));}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["/Users/tanjapolz/Documents/Uni/3/devops/lecture-devops-app/app/client/src/App.js"],"names":["React","Component","Fragment","AddTodo","ListTodo","PageLoader","Header","Login","init","Signup","updateTodo","deleteTodo","signout","fillTodoRows","App","state","loggedInUser","token","todos","signup","addTodo","newTodo","setState","ps","initiateTodo","handleImportant","handleDone","handleDelete","toggleSignup","index","id","important","then","todo","newState","catch","error","errMessage","done","logout","handleLogin","user","backToLogin","splice","length","handleSignout","userName","name"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from 'react';\nimport AddTodo from './components/AddTodo/AddTodo'\nimport ListTodo from './components/ListTodo/ListTodo'\nimport PageLoader from './components/PageLoader/PageLoader'\nimport Header from './components/Header/Header'\nimport Login from './components/Login/Login'\nimport { init } from './utils/APICalls'\nimport Signup from './components/Signup/Signup'\nimport './App.css'\nimport { updateTodo, deleteTodo, signout } from './utils/APICalls'\nimport { fillTodoRows } from './utils/Helper'\n\nclass App extends Component {\n  state = {\n    init: true,\n    loggedInUser: '',\n    token: '',\n    todos: [],\n    signup: false\n  }\n\n\n  componentDidMount() {\n    init()\n      .then(user => {\n        this.handleLogin(user)\n      })\n      .catch(error => {\n        this.setState({\n          init: false\n        })\n      })\n  }\n\n  addTodo = (newTodo) => {\n    this.setState((ps) => ({\n      todos: [...ps.todos, newTodo]\n    }))\n  }\n\n  initiateTodo = (todos) => {\n    this.setState({ todos })\n  }\n\n  fillTodoRows = () => fillTodoRows(this.state.todos, this.handleImportant, this.handleDone, this.handleDelete)\n\n  toggleSignup = () => {\n    this.setState((ps) => (\n      { signup: !ps.signup }\n    ))\n  }\n\n\n  handleImportant = (index, id) => {\n    updateTodo(id, !this.state.todos[index].important)\n      .then(todo => {\n        this.setState((ps) => {\n          const newState = ps\n          newState.todos[index].important = !newState.todos[index].important\n          return newState\n        })\n      })\n      .catch(error => {\n        this.setState({ errMessage: error })\n      })\n  }\n\n  handleDone = (index, id) => {\n    updateTodo(id, null, !this.state.todos[index].done)\n      .then(todo => {\n        this.setState((ps) => {\n          const newState = ps\n          newState.todos[index].done = !newState.todos[index].done\n          return newState\n        })\n      })\n      .catch(error => {\n        this.setState({ errMessage: error })\n      })\n  }\n\n  logout = () => {\n    this.setState({\n      loggedInUser: \"\",\n      token: \"\"\n    })\n  }\n\n  handleLogin = (user) => {\n    this.setState({\n      loggedInUser: user,\n      signup: false,\n      init: false\n    })\n  }\n\n  backToLogin = () => {\n    this.setState({\n      signup: false\n    })\n  }\n\n  handleDelete = (index, id) => {\n    deleteTodo(id)\n      .then(todo => {\n        this.setState((ps) => ({\n          todos: [...ps.todos.splice(0, index), ...ps.todos.splice(1, ps.todos.length)]\n        }))\n      })\n      .catch(error => {\n        this.setState({ errMessage: error })\n      })\n  }\n\n  handleSignout = () => {\n    signout()\n      .then(user => {\n        this.setState({\n          loggedInUser: '',\n          token: '',\n          todos: [],\n          signup: false\n        })\n      })\n      .catch(error => {\n        this.setState({ errMessage: error })\n      })\n  }\n\n  render() {\n    const userName = (this.state.loggedInUser) ? this.state.loggedInUser.user.name : \"\"\n    return <div className=\"app-main\">\n      <Header />\n      {(this.state.init) ?\n        <PageLoader />\n        : (this.state.signup)\n          ? <Signup backToLogin={this.backToLogin} signupDone={this.toggleSignup} />\n          : (!this.state.loggedInUser)\n            ? <Login login={this.handleLogin} signup={this.toggleSignup} />\n            : (\n              <Fragment>\n\n                <AddTodo\n                  userName={userName}\n                  addTodo={this.addTodo}\n                  signout={this.handleSignout}\n                />\n\n                <ListTodo\n                  initiateTodo={this.initiateTodo}\n                  todos={this.state.todos}\n                  fillTodoRows={this.fillTodoRows}\n                  handleImportant={this.handleImportant}\n                  handleDone={this.handleDone}\n                  deleteTodo={this.handleDelete}\n                />\n\n              </Fragment>\n            )\n      }\n    </div>\n\n  }\n}\n\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}